<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TUG - The Unseen Generation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>The Unseen Generation (TUG)</h1>

        <!-- Post Form -->
        <div class="post-form">
            <input type="text" id="name" placeholder="Your Name">
            <input type="email" id="email" placeholder="Your Email (preferred)">
            <textarea id="message" rows="4" placeholder="Write something..."></textarea>
            <button id="postBtn">Post</button>
        </div>

        <!-- Posts Feed -->
        <div id="postsFeed"></div>
    </div>

<script>
/* Admin password */
const ADMIN_PASSWORD = "admin123"; // Change this later
let isAdmin = false;

/* Load posts from localStorage */
let posts = JSON.parse(localStorage.getItem('tugPosts')) || [];
renderPosts();

/* Post Button */
document.getElementById('postBtn').addEventListener('click', () => {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const message = document.getElementById('message').value.trim();

    if(!name || !email || !message){
        alert("Please fill in all fields.");
        return;
    }

    const post = {
        id: Date.now(),
        name,
        email,
        message,
        time: new Date().toLocaleString()
    };

    posts.unshift(post);
    localStorage.setItem('tugPosts', JSON.stringify(posts));
    renderPosts();

    document.getElementById('name').value = '';
    document.getElementById('email').value = '';
    document.getElementById('message').value = '';
});

/* Render Posts */
function renderPosts() {
    const feed = document.getElementById('postsFeed');
    feed.innerHTML = '';

    posts.forEach(post => {
        const postDiv = document.createElement('div');
        postDiv.className = 'post';
        postDiv.dataset.id = post.id;

        let menuOptions = '';
        if(post.email === localStorage.getItem('userEmail')){
            menuOptions = `<span class="menu" onclick="editPost(${post.id})">â‹®</span>`;
        } else {
            menuOptions = `<span class="menu" onclick="reportPost(${post.id})">â‹®</span>`;
        }

        if(isAdmin){
            menuOptions += ` <span style="cursor:pointer;color:red;" onclick="adminDelete(${post.id})">[Delete as Admin]</span>`;
        }

        postDiv.innerHTML = `
            <div class="post-header">
                <strong>${post.name}</strong>
                ${menuOptions}
            </div>
            <p>${post.message}</p>
            <small>${post.time}</small>
            <div class="reactions">
                <span onclick="react('${post.id}','Motivating ðŸ’ª')">Motivating ðŸ’ª</span>
                <span onclick="react('${post.id}','Inspiring âœ¨')">Inspiring âœ¨</span>
                <span onclick="react('${post.id}','Relatable ðŸ’­')">Relatable ðŸ’­</span>
                <span onclick="react('${post.id}','I See You ðŸ‘€')">I See You ðŸ‘€</span>
            </div>
        `;
        feed.appendChild(postDiv);
    });
}

/* Store user email for editing */
document.getElementById('email').addEventListener('blur', ()=>{
    localStorage.setItem('userEmail', document.getElementById('email').value.trim());
});

/* Edit Post */
function editPost(id){
    const post = posts.find(p => p.id == id);
    const newMessage = prompt("Edit your post:", post.message);
    if(newMessage !== null && newMessage.trim() !== ''){
        post.message = newMessage.trim();
        localStorage.setItem('tugPosts', JSON.stringify(posts));
        renderPosts();
    }
}

/* Report Post */
function reportPost(id){
    alert("This post has been reported. Thank you.");
}

/* Admin Delete */
function adminDelete(id){
    if(!isAdmin){
        const pw = prompt("Enter admin password:");
        if(pw !== ADMIN_PASSWORD){
            alert("Wrong password.");
            return;
        }
        isAdmin = true;
    }
    posts = posts.filter(p => p.id != id);
    localStorage.setItem('tugPosts', JSON.stringify(posts));
    renderPosts();
}

/* Reactions */
function react(id, reaction){
    alert(`You reacted: ${reaction}`);
}
</script>
</body>
</html>
