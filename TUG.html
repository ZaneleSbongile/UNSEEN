<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TUG - The Unseen Generation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
     <!-- Desktop Navigation -->
  <div class="navigation">
    <!-- Hamburger Icon -->
    <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    <a href="index.html"><img src="images/logo.png" alt="Unseen Generation Logo" height="60px" width="50px" loading="lazy"/></a>
    <nav class="desktop-nav">
      <div class="dropdown">
        <a href="#">About</a> <!-- Non-clickable -->
        <div class="dropdown-content">
          <a href="main.html">the UNSEEN generation</a>
          <a href="born.html">How It Was Born</a>
          <a href="mission.html">Mission</a>
          <a href="vision.html">Vision</a>
        </div>
      </div>
      <a href="causes.html">Causes</a>
      <a href="ef.html">Empowerment Fridays</a>
      <a href="seen&heard.html">Seen & Heard</a>
      <a href="TUG.html">TUG</a>
      <a href="gallery.html">Gallery</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
    <div class="container">
        <h1>The Unseen Generation (TUG)</h1>

        <!-- Post Form -->
        <div class="post-form">
            <input type="text" id="name" placeholder="Your Name">
            <input type="email" id="email" placeholder="Your Email (preferred)">
            <textarea id="message" rows="4" placeholder="Write something..."></textarea>
            <button id="postBtn">Post</button>
        </div>

        <!-- Posts Feed -->
        <div id="postsFeed"></div>
    </div>
<script>
/* Admin password */
const ADMIN_PASSWORD = "admin123"; // Change this later
let isAdmin = false;

/* Load posts from localStorage */
let posts = JSON.parse(localStorage.getItem('tugPosts')) || [];
renderPosts();

/* Post Button */
document.getElementById('postBtn').addEventListener('click', () => {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const message = document.getElementById('message').value.trim();

    if(!name || !email || !message){
        alert("Please fill in all fields.");
        return;
    }

    const post = {
        id: Date.now(),
        name,
        email,
        message,
        time: new Date().toLocaleString()
    };

    posts.unshift(post);
    localStorage.setItem('tugPosts', JSON.stringify(posts));
    renderPosts();

    document.getElementById('name').value = '';
    document.getElementById('email').value = '';
    document.getElementById('message').value = '';
});

/* Store user email for editing */
document.getElementById('email').addEventListener('blur', ()=>{
    localStorage.setItem('userEmail', document.getElementById('email').value.trim());
});

/* Render Posts */
function renderPosts() {
    const feed = document.getElementById('postsFeed');
    feed.innerHTML = '';

    posts.forEach(post => {
        const postDiv = document.createElement('div');
        postDiv.className = 'post';
        postDiv.dataset.id = post.id;

        // Post header and menu
        const headerDiv = document.createElement('div');
        headerDiv.className = 'post-header';

        const nameStrong = document.createElement('strong');
        nameStrong.textContent = post.name;

        headerDiv.appendChild(nameStrong);

        // Menu
        const menuContainer = document.createElement('div');
        menuContainer.style.position = 'relative';

        if(post.email === localStorage.getItem('userEmail')){
            const menuBtn = document.createElement('span');
            menuBtn.className = 'menu';
            menuBtn.textContent = 'â‹®';
            menuBtn.addEventListener('click', (e)=>{
                e.stopPropagation();
                toggleMenu(post.id);
            });
            menuContainer.appendChild(menuBtn);

            const menuDiv = document.createElement('div');
            menuDiv.id = `menu-${post.id}`;
            menuDiv.className = 'post-menu';
            menuDiv.style.display = 'none';

            const editOption = document.createElement('div');
            editOption.textContent = 'Edit';
            editOption.addEventListener('click', ()=>editPost(post.id));
            menuDiv.appendChild(editOption);

            const deleteOption = document.createElement('div');
            deleteOption.textContent = 'Delete';
            deleteOption.addEventListener('click', ()=>deletePost(post.id));
            menuDiv.appendChild(deleteOption);

            menuContainer.appendChild(menuDiv);
        } else {
            const reportBtn = document.createElement('span');
            reportBtn.className = 'menu';
            reportBtn.textContent = 'â‹® Report';
            reportBtn.addEventListener('click', ()=>reportPost(post.id));
            menuContainer.appendChild(reportBtn);
        }

        if(isAdmin){
            const adminDeleteBtn = document.createElement('span');
            adminDeleteBtn.style.cursor = 'pointer';
            adminDeleteBtn.style.color = 'red';
            adminDeleteBtn.textContent = ' [Delete as Admin]';
            adminDeleteBtn.addEventListener('click', ()=>adminDelete(post.id));
            menuContainer.appendChild(adminDeleteBtn);
        }

        headerDiv.appendChild(menuContainer);

        // Message and time
        const messageP = document.createElement('p');
        messageP.textContent = post.message;

        const timeSmall = document.createElement('small');
        timeSmall.textContent = post.time;

        // Reactions
        const reactionsDiv = document.createElement('div');
        reactionsDiv.className = 'reactions';

        ['Motivating ðŸ’ª','Inspiring âœ¨','Relatable ðŸ’­','I See You ðŸ‘€'].forEach(reaction=>{
            const span = document.createElement('span');
            span.textContent = reaction;
            span.addEventListener('click', ()=>react(post.id, reaction));
            reactionsDiv.appendChild(span);
        });

        // Append everything
        postDiv.appendChild(headerDiv);
        postDiv.appendChild(messageP);
        postDiv.appendChild(timeSmall);
        postDiv.appendChild(reactionsDiv);

        feed.appendChild(postDiv);
    });
}

/* Toggle menu visibility */
function toggleMenu(id){
    const menu = document.getElementById(`menu-${id}`);
    if(menu.style.display === 'none') menu.style.display = 'block';
    else menu.style.display = 'none';
}

/* Edit Post */
function editPost(id){
    const post = posts.find(p => p.id == id);
    const newMessage = prompt("Edit your post:", post.message);
    if(newMessage !== null && newMessage.trim() !== ''){
        post.message = newMessage.trim();
        localStorage.setItem('tugPosts', JSON.stringify(posts));
        renderPosts();
    }
}

/* Delete your own post */
function deletePost(id){
    if(confirm("Are you sure you want to delete this post?")){
        posts = posts.filter(p => p.id != id);
        localStorage.setItem('tugPosts', JSON.stringify(posts));
        renderPosts();
    }
}

/* Report Post */
function reportPost(id){
    alert("This post has been reported. Thank you.");
}

/* Admin Delete */
function adminDelete(id){
    if(!isAdmin){
        const pw = prompt("Enter admin password:");
        if(pw !== ADMIN_PASSWORD){
            alert("Wrong password.");
            return;
        }
        isAdmin = true;
    }
    posts = posts.filter(p => p.id != id);
    localStorage.setItem('tugPosts', JSON.stringify(posts));
    renderPosts();
}

/* Reactions */
function react(id, reaction){
    alert(`You reacted: ${reaction}`);
}

/* Close menus when clicking outside */
document.addEventListener('click', function(event){
    posts.forEach(post=>{
        const menu = document.getElementById(`menu-${post.id}`);
        if(menu && !menu.contains(event.target) && !event.target.classList.contains('menu')){
            menu.style.display = 'none';
        }
    });
});

</script>
</body>
</html>
