<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUG - The Unseen Generation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
     <!-- Desktop Navigation -->
  <div class="navigation">
    <!-- Hamburger Icon -->
    <div class="hamburger" onclick="toggleMenu()">‚ò∞</div>
    <a href="index.html"><img src="images/logo.png" alt="Unseen Generation Logo" height="60px" width="50px" loading="lazy"/></a>
    <nav class="desktop-nav">
      <div class="dropdown">
        <a href="#">About</a> <!-- Non-clickable -->
        <div class="dropdown-content">
          <a href="main.html">the UNSEEN generation</a>
          <a href="born.html">How It Was Born</a>
          <a href="mission.html">Mission</a>
          <a href="vision.html">Vision</a>
        </div>
      </div>
      <a href="causes.html">Causes</a>
      <a href="ef.html">Empowerment Fridays</a>
      <a href="seen&heard.html">Seen & Heard</a>
      <a href="TUG.html">TUG</a>
      <a href="gallery.html">Gallery</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
    <div class="container">
        <h1>The Unseen Generation (TUG)</h1>
        <p>Welcome to The Unseen Generation (TUG) Space
This is a safe and empowering corner of the web where every voice matters. Here, you can share the moments when you felt seen, heard, loved, or supported‚Äîbig or small. Your story, your journey, and your experiences are valuable, and by sharing them, you not only honor yourself but inspire others who may be going through similar moments.

TUG is more than just a page‚Äîit‚Äôs a community. A place to connect, uplift, and celebrate the often-overlooked moments of being acknowledged. Everyone deserves to feel seen, and here, your story is welcomed, your voice is heard, and your presence makes a difference.

Join us, share your story, and be part of a generation that rises together, celebrates each other, and proves that no one is truly unseen.</p>

        <!-- Post Form -->
        <div class="post-form">
            <input type="text" id="name" placeholder="Your Name">
            <input type="email" id="email" placeholder="Your Email (preferred)">
            <textarea id="message" rows="4" placeholder="Write something..."></textarea>
            <button id="postBtn">Post</button>
        </div>

        <!-- Posts Feed -->
        <div id="postsFeed"></div>
    </div>

    <!-- Footer -->
  <footer id="site-footer">
    <p>&copy; 2025 The Unseen Generation. All rights reserved.</p>
  </footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue, update, remove } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyD8P_Cpg8oiGKWuefw8MDAGIGxuNwazlIY",
  authDomain: "theunseengeneration-ef3a7.firebaseapp.com",
  databaseURL: "https://theunseengeneration-ef3a7-default-rtdb.firebaseio.com",
  projectId: "theunseengeneration-ef3a7",
  storageBucket: "theunseengeneration-ef3a7.firebasestorage.app",
  messagingSenderId: "19836098555",
  appId: "1:19836098555:web:98632364991cfe7678dd5e"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

// Admin password
const ADMIN_PASSWORD = "admin123";
let isAdmin = false;

// References
const postsRef = ref(database, 'posts');

// Elements
const postBtn = document.getElementById('postBtn');
const nameInput = document.getElementById('name');
const emailInput = document.getElementById('email');
const messageInput = document.getElementById('message');
const feed = document.getElementById('postsFeed');

// Store user email locally
emailInput.addEventListener('blur', () => {
  localStorage.setItem('userEmail', emailInput.value.trim());
});

// Post button
postBtn.addEventListener('click', () => {
  const name = nameInput.value.trim();
  const email = emailInput.value.trim();
  const message = messageInput.value.trim();

  if(!name || !email || !message){
    alert("Please fill in all fields.");
    return;
  }

  const newPostRef = push(postsRef);
  set(newPostRef, {
    id: newPostRef.key,
    name,
    email,
    message,
    time: new Date().toLocaleString()
  });

  nameInput.value = '';
  emailInput.value = '';
  messageInput.value = '';
});

// Real-time listener
onValue(postsRef, (snapshot) => {
  const posts = snapshot.val();
  renderPosts(posts);
});

// Render posts
function renderPosts(posts){
  feed.innerHTML = '';
  if(!posts) return;

  Object.values(posts).reverse().forEach(post => {
    const postDiv = document.createElement('div');
    postDiv.className = 'post';
    postDiv.dataset.id = post.id;

    let menuHTML = '';
    if(post.email === localStorage.getItem('userEmail')){
      menuHTML = `
        <span class="menu" onclick="toggleMenu('${post.id}')">‚ãÆ</span>
        <div id="menu-${post.id}" class="post-menu" style="display:none;">
          <div onclick="editPost('${post.id}')">Edit</div>
          <div onclick="deletePost('${post.id}')">Delete</div>
        </div>`;
    } else {
      menuHTML = `<span class="menu" onclick="reportPost('${post.id}')">‚ãÆ Report</span>`;
    }

    if(isAdmin){
      menuHTML += ` <span style="cursor:pointer;color:red;" onclick="adminDelete('${post.id}')">[Delete as Admin]</span>`;
    }

    postDiv.innerHTML = `
      <div class="post-header" style="position:relative;">
        <strong>${post.name}</strong>
        ${menuHTML}
      </div>
      <p>${post.message}</p>
      <small>${post.time}</small>
      <div class="reactions">
        <span onclick="react('${post.id}','Motivating üí™')">Motivating üí™</span>
        <span onclick="react('${post.id}','Inspiring ‚ú®')">Inspiring ‚ú®</span>
        <span onclick="react('${post.id}','Relatable üí≠')">Relatable üí≠</span>
        <span onclick="react('${post.id}','I See You üëÄ')">I See You üëÄ</span>
      </div>
    `;
    feed.appendChild(postDiv);
  });
}

// Toggle menu
window.toggleMenu = function(id){
  const menu = document.getElementById(`menu-${id}`);
  menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
};

// Edit post
window.editPost = function(id){
  const newMessage = prompt("Edit your post:");
  if(!newMessage) return;
  const postRef = ref(database, `posts/${id}`);
  update(postRef, { message: newMessage });
};

// Delete your post
window.deletePost = function(id){
  if(!confirm("Are you sure you want to delete this post?")) return;
  const postRef = ref(database, `posts/${id}`);
  remove(postRef);
};

// Report post
window.reportPost = function(id){
  alert("This post has been reported. Thank you.");
};

// Admin delete
window.adminDelete = function(id){
  if(!isAdmin){
    const pw = prompt("Enter admin password:");
    if(pw !== ADMIN_PASSWORD){
      alert("Wrong password.");
      return;
    }
    isAdmin = true;
  }
  const postRef = ref(database, `posts/${id}`);
  remove(postRef);
};

// Reactions
window.react = function(id, reaction){
  alert(`You reacted: ${reaction}`);
};

// Close menus when clicking outside
document.addEventListener('click', function(event){
  const postsMenus = document.querySelectorAll('.post-menu');
  postsMenus.forEach(menu=>{
    if(!menu.contains(event.target) && event.target.className !== 'menu'){
      menu.style.display = 'none';
    }
  });
});
</script>

<!-- Side Menu -->
  <div class="side-menu" id="sideMenu">
    <a href="index.html">üè† Home</a>
    <a href="about.html">About</a>
    <a href="causes.html">Causes</a>
    <a href="ef.html">Empowerment Fridays</a>
    <a href="seen&heard.html">Seen & Heard</a>
    <a href="TUG.html">TUG</a>
    <a href="gallery.html">Gallery</a>
    <a href="contact.html">Contact</a>
  </div>

  <!-- Scripts -->
  <script>
    function toggleMenu() {
      const menu = document.getElementById("sideMenu");
      menu.classList.toggle("active");
    }

    let slideIndex = 0;
    showSlides();

    function showSlides() {
      const slides = document.querySelectorAll(".slide");
      slides.forEach(slide => slide.style.display = "none");

      slideIndex++;
      if (slideIndex > slides.length) { slideIndex = 1; }

      slides[slideIndex - 1].style.display = "block";
      setTimeout(showSlides, 3000); // Change image every 3 sec
    }
  </script>
    
</body>
</html>
